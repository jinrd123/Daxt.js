/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={75:(e,t,n)=>{var r=n(556),o=n(645)(r);o.push([e.id,".style_test_ejhE3 {\n  background: skyblue;\n  color: brown;\n}\n",""]),o.locals={test:"style_test_ejhE3"},e.exports=o},123:(e,t,n)=>{var r=n(556),o=n(645)(r);o.push([e.id,".style_test_RDTp9 {\n  background: pink;\n  color: red;\n}\n",""]),o.locals={test:"style_test_RDTp9"},e.exports=o},138:(e,t,n)=>{var r=n(613),o=n(683),i="string"==typeof r?[[e.id,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return o(i,e)}},206:(e,t,n)=>{var r=n(123),o=n(683),i="string"==typeof r?[[e.id,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return o(i,e)}},299:(e,t,n)=>{var r=n(556),o=n(645)(r);o.push([e.id,".style_not-found_BREHz {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.style_not-found-content_pTtOS {\n  text-align: center;\n  padding: 2rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.style_not-found_BREHz h1 {\n  font-size: 6rem;\n  color: #e74c3c;\n  margin: 0;\n  font-weight: bold;\n}\n\n.style_not-found_BREHz h2 {\n  font-size: 2rem;\n  color: #333;\n  margin: 1rem 0;\n}\n\n.style_not-found_BREHz p {\n  color: #666;\n  margin-bottom: 2rem;\n}\n\n.style_back-home_wNEaU {\n  display: inline-block;\n  padding: 12px 24px;\n  background-color: #3498db;\n  color: white;\n  text-decoration: none;\n  border-radius: 4px;\n  transition: background-color 0.3s;\n}\n\n.style_back-home_wNEaU:hover {\n  background-color: #2980b9;\n} ",""]),o.locals={"not-found":"style_not-found_BREHz","not-found-content":"style_not-found-content_pTtOS","back-home":"style_back-home_wNEaU"},e.exports=o},436:(e,t,n)=>{var r=n(75),o=n(683),i="string"==typeof r?[[e.id,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return o(i,e)}},556:e=>{"use strict";e.exports=function(e){return e[1]}},613:(e,t,n)=>{var r=n(556),o=n(645)(r);o.push([e.id,".style_test_UNFVm {\n  background: greenyellow;\n  color: red;\n}\n",""]),o.locals={test:"style_test_UNFVm"},e.exports=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(a[l]=!0)}for(var u=0;u<e.length;u++){var s=[].concat(e[u]);r&&a[s[0]]||(void 0!==i&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=i),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),o&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=o):s[4]="".concat(o)),t.push(s))}},t}},683:e=>{"use strict";var t={};function n(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}function r(e){e.forEach(function(e){if(--t[e]<=0){var n=document.getElementById(e);n&&n.parentNode.removeChild(n)}})}e.exports=function(e,o){for(var i=void 0===o?{}:o,a=i.replace,c=void 0!==a&&a,l=i.prepend,u=void 0!==l&&l,s=i.prefix,d=void 0===s?"s":s,f=[],m=0;m<e.length;m++){var p=e[m],h=p[0],v=p[1],y=p[2],b=p[3],g=""+d+h+"-"+m;if(f.push(g),!t[g]||c){t[g]=1;var E=document.getElementById(g),_=!1;E||(_=!0,(E=document.createElement("style")).setAttribute("type","text/css"),E.id=g,y&&E.setAttribute("media",y));var x=v;b&&"function"==typeof btoa&&(x+="\n/*# sourceMappingURL=data:application/json;base64,"+n(JSON.stringify(b))+"*/",x+="\n/*# sourceURL="+b.file+"?"+g+"*/"),"textContent"in E?E.textContent=x:E.styleSheet.cssText=x,_&&(u?document.head.insertBefore(E,document.head.childNodes[0]):document.head.appendChild(E))}else t[g]++}return r.bind(null,f)}},712:(e,t,n)=>{var r=n(299),o=n(683),i="string"==typeof r?[[e.id,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return o(i,e)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("express");var t=n.n(e);const r=require("react");var o=n.n(r);const i=require("react-dom/server"),a=require("react-router-dom/server"),c=require("react-router-dom"),l=function(){return o().createElement("div",null,o().createElement(c.Link,{to:"/"},"Home"),o().createElement("br",null),o().createElement(c.Link,{to:"/about"},"About"))},u=require("react-redux");var s="change_home_list",d=function(){return function(e,t,n){return n.get("/home").then(function(t){var n=t.data;e({type:s,data:n})})}},f=n(436),m=n.n(f);const p=require("isomorphic-style-loader/useStyles");var h=n.n(p);const v=require("react-helmet");var y=function(e){return h()(m()),(0,r.useEffect)(function(){(0,e.getHomeData)()},[]),o().createElement(r.Fragment,null,o().createElement(v.Helmet,null,o().createElement("title",null,"Welcom to my ssr site"),o().createElement("meta",{name:"description",content:"Daxt，麻雀虽小，五脏俱全"})),o().createElement("div",{className:m().test},o().createElement(l,null),"Hello， 我是靳荣达，这是我的一款基于react生态的服务端渲染框架，名为Daxt.js，有好运之意，同时致敬Next.js这款优秀的开源框架",o().createElement("div",null,"Daxt当前并不完善，但我认为也有如下的竞争力"),o().createElement("div",null,"不错的开发体验"),o().createElement("ul",null,o().createElement("li",null,"支持热更，借助nodemon、webpack watch以及npm-run-all等工具链的组合实现热更新"),o().createElement("li",null,"清晰的项目结构，components和views文件夹下，随心所欲的编写react代码，代码会自动被client以及server进行处理；Routes.js中使用配置对象的形式进行路由配置")),o().createElement("div",null,"路由支持："),o().createElement("ul",null,o().createElement("li",null,"集成了react-router-dom@6，支持react-router的最新特性"),o().createElement("li",null,"重写useRoutes方法(getRoutes)，支持嵌套路由"),o().createElement("li",null,"基于配置模式实现路由组件异步数据的ssr")),o().createElement("div",null,"基于redux的状态管理支持"),o().createElement("div",null,"对cssModule的样式服务端渲染支持"),o().createElement("div",null,"基于react-helmet进行更细节的seo优化"),o().createElement("div",null,e.data.title)))};y.loadData=function(e){return e.dispatch(d())};const b=(0,u.connect)(function(e){return{data:e.home.data}},function(e){return{getHomeData:function(){e(d())}}})(y);var g=n(206),E=n.n(g);const _=function(){return h()(E()),o().createElement("div",{className:E().test},o().createElement(l,null),"This is About page",o().createElement(c.Outlet,null))};var x=n(138),S=n.n(x);const w=function(){return h()(S()),o().createElement("div",{className:S().test},"This is AboutChildren")};n(712);const O=function(){return o().createElement("div",{className:"not-found"},o().createElement("div",{className:"not-found-content"},o().createElement("h1",null,"404"),o().createElement("h2",null,"页面未找到"),o().createElement("p",null,"抱歉，您访问的页面不存在。"),o().createElement("a",{href:"/",className:"back-home"},"返回首页")))};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(null,arguments)}var C=[{path:"/",element:o().createElement(b,null),loadData:b.loadData},{path:"/about",element:o().createElement(_,null),children:[{path:"/about",element:o().createElement(c.Navigate,{to:"/about/children"})},{path:"/about/children",element:o().createElement(w,null)}]},{path:"*",element:o().createElement(O,null)}];const D=require("isomorphic-style-loader/StyleContext");var R=n.n(D);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e,t){var n,r=new Set,l=(0,i.renderToString)(o().createElement(R().Provider,{value:{insertCss:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){return r.add(e._getCss())})}}},o().createElement(u.Provider,{store:t},o().createElement(a.StaticRouter,{location:e.path,context:{}},function(e){var t=function(e){return e.map(function(e,n){return e.children&&e.children.length>0?o().createElement(c.Route,j({},e,{key:n}),t(e.children)):o().createElement(c.Route,j({},e,{key:n}))})};return o().createElement(c.Routes,null,t(e))}(C))))),s=v.Helmet.renderStatic();return"\n        <html>\n            <head>\n                ".concat(s.title.toString(),"\n                ").concat(s.meta.toString(),"\n                <style>").concat((n=r,function(e){if(Array.isArray(e))return k(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).join(""),'</style>\n            </head>\n            <body>\n                <div id="root">').concat(l,"</div>\n                <script>\n                  window.__CONTEXT__ = {\n                    initialState: ").concat(JSON.stringify(t.getState()),'\n                  }\n                <\/script>\n                <script src="./index.js"><\/script>\n            </body>\n        </html>\n    ')};const N=require("redux"),T=require("redux-thunk");var A=n.n(T);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){H(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function H(e,t,n){return(t=function(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U={data:"home data"};const B=require("axios");var M=n.n(B);M().create({baseURL:"/api"});var z="http://127.0.0.1:".concat(3e3);const I=M().create({baseURL:z});var G=(0,N.combineReducers)({home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;return t.type===s?F(F({},e),{},{data:t.data}):e}});const J=require("express-http-proxy");var V=n.n(J);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function $(e){var t=function(e){if("object"!=W(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:t+""}const K=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state="CLOSED",this.failureCount=0,this.failureThreshold=3,this.timeout=3e4,this.lastFailureTime=null},(t=[{key:"onSuccess",value:function(){this.failureCount=0,this.state="CLOSED"}},{key:"onFailure",value:function(){this.failureCount++,this.failureCount>=this.failureThreshold&&(this.state="OPEN",this.lastFailureTime=Date.now())}},{key:"shouldReset",value:function(){return"OPEN"===this.state&&Date.now()-this.lastFailureTime>this.timeout}},{key:"isOpen",value:function(){return this.shouldReset()&&(this.state="CLOSED",this.failureCount=0),"OPEN"===this.state}}])&&X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var Q=t()();Q.use(t().static("public"));var Y=new K;Q.get("/home",function(e,t){var n={title:"欢迎来到首页",description:"这是一个本地服务提供的首页数据",features:["服务端渲染 (SSR)","熔断器机制","代理转发","动态路由"],timestamp:(new Date).toISOString(),server:"本地服务"};t.json(n)}),Q.use("/api",V()(z,{proxyReqPathResolver:function(e){return e.url}})),Q.get("*",function(e,t){if(Y.isOpen())return console.log("熔断器开启，使用CSR降级渲染"),t.send('\n    <html>\n      <head>\n        <title>Loading...</title>\n        <meta charset="utf-8">\n      </head>\n      <body>\n        <div id="root">\n          <div style="text-align: center; padding: 50px;">\n            <h2>Loading...</h2>\n          </div>\n        </div>\n        \x3c!-- 降级模式标记 --\x3e\n        <script>\n          window.__DEGRADED_MODE__ = true;\n        <\/script>\n        <script src="./index.js"><\/script>\n      </body>\n    </html>\n  '),void console.log("@csrFallback render success");try{var n=(0,N.createStore)(G,(0,N.applyMiddleware)(A().withExtraArgument(I))),r=(0,c.matchRoutes)(C,e.path);if(!r||0===r.length)return void t.status(404).send(P(e,n));var o=[];r.forEach(function(e){if(e.route.loadData){var t=e.route.loadData(n).catch(function(t){return console.error("Error loading data for route ".concat(e.route.path,":"),t),null});o.push(t)}}),Promise.all(o).then(function(){Y.onSuccess(),t.send(P(e,n))}).catch(function(e){console.error("SSR rendering failed:",e),Y.onFailure(),t.send('\n    <html>\n      <head>\n        <title>Loading...</title>\n        <meta charset="utf-8">\n      </head>\n      <body>\n        <div id="root">\n          <div style="text-align: center; padding: 50px;">\n            <h2>Loading...</h2>\n          </div>\n        </div>\n        \x3c!-- 降级模式标记 --\x3e\n        <script>\n          window.__DEGRADED_MODE__ = true;\n        <\/script>\n        <script src="./index.js"><\/script>\n      </body>\n    </html>\n  ')})}catch(e){console.error("Server error:",e),Y.onFailure(),t.send('\n    <html>\n      <head>\n        <title>Loading...</title>\n        <meta charset="utf-8">\n      </head>\n      <body>\n        <div id="root">\n          <div style="text-align: center; padding: 50px;">\n            <h2>Loading...</h2>\n          </div>\n        </div>\n        \x3c!-- 降级模式标记 --\x3e\n        <script>\n          window.__DEGRADED_MODE__ = true;\n        <\/script>\n        <script src="./index.js"><\/script>\n      </body>\n    </html>\n  ')}}),Q.listen(3e3,function(){console.log("server run successfully")})})()})();